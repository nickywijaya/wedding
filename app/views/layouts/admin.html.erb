<!DOCTYPE html>
<!-- Coding By CodingNepal - youtube.com/@codingnepal -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wedding Admin</title>

  <%# <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %> %>

  <%= stylesheet_link_tag 'navbar', media: 'all' %>
  <!-- Linking Google fonts for icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0">
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-2">
        <aside class="sidebar">
          <!-- Sidebar header -->
          <header class="sidebar-header">
            <a href="#" class="header-logo">
              <span class="nav-icon material-symbols-rounded">home</span>
            </a>
            <button class="toggler sidebar-toggler">
              <span class="material-symbols-rounded">chevron_left</span>
            </button>
            <button class="toggler menu-toggler">
              <span class="material-symbols-rounded">menu</span>
            </button>
          </header>
          <nav class="sidebar-nav">
            <!-- Primary top nav -->
            <ul class="nav-list primary-nav">
              <li class="nav-item">
                <a href=<%= admin_weddings_path %> class="nav-link">
                  <span class="nav-icon material-symbols-rounded">calendar_today</span>
                  <span class="nav-label">Weddings</span>
                </a>
                <span class="nav-tooltip">Weddings</span>
              </li>
              <li class="nav-item">
                <a href=<%= admin_venues_path %> class="nav-link">
                  <span class="nav-icon material-symbols-rounded">notifications</span>
                  <span class="nav-label">Venues</span>
                </a>
                <span class="nav-tooltip">Venues</span>
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link">
                  <span class="nav-icon material-symbols-rounded">email</span>
                  <span class="nav-label">Invitations</span>
                </a>
                <span class="nav-tooltip">Invitations</span>
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link">
                  <span class="nav-icon material-symbols-rounded">people</span>
                  <span class="nav-label">Guests</span>
                </a>
                <span class="nav-tooltip">Guests</span>
              </li>
            </ul>
            <!-- Secondary bottom nav -->
            <ul class="nav-list secondary-nav">
              <li class="nav-item">
                <a href="#" class="nav-link">
                  <span class="nav-icon material-symbols-rounded">account_circle</span>
                  <span class="nav-label">Profile</span>
                </a>
                <span class="nav-tooltip">Profile</span>
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link">
                  <span class="nav-icon material-symbols-rounded">logout</span>
                  <span class="nav-label">Logout</span>
                </a>
                <span class="nav-tooltip">Logout</span>
              </li>
            </ul>
          </nav>
        </aside>
      </div>

      <div class="col-md-9">
          <%= yield %> <!-- This is where the content will be injected -->
      </div>
    </div>
  </div>
</body>
</html>

<script>
const sidebar = document.querySelector(".sidebar");
const sidebarToggler = document.querySelector(".sidebar-toggler");
const menuToggler = document.querySelector(".menu-toggler");
// Ensure these heights match the CSS sidebar height values
let collapsedSidebarHeight = "56px"; // Height in mobile view (collapsed)
let fullSidebarHeight = "calc(100vh - 32px)"; // Height in larger screen
// Toggle sidebar's collapsed state
sidebarToggler.addEventListener("click", () => {
  sidebar.classList.toggle("collapsed");
});
// Update sidebar height and menu toggle text
const toggleMenu = (isMenuActive) => {
  sidebar.style.height = isMenuActive ? `${sidebar.scrollHeight}px` : collapsedSidebarHeight;
  menuToggler.querySelector("span").innerText = isMenuActive ? "close" : "menu";
}
// Toggle menu-active class and adjust height
menuToggler.addEventListener("click", () => {
  toggleMenu(sidebar.classList.toggle("menu-active"));
});
// (Optional code): Adjust sidebar height on window resize
window.addEventListener("resize", () => {
  if (window.innerWidth >= 1024) {
    sidebar.style.height = fullSidebarHeight;
  } else {
    sidebar.classList.remove("collapsed");
    sidebar.style.height = "auto";
    toggleMenu(sidebar.classList.contains("menu-active"));
  }
});

</script>